<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>OpenMLS v0.4 Release | OpenMLS</title>
<meta name=keywords content="mls,openmls,release"><meta name=description content="Today, we are excited to announce the release of v0.4 of OpenMLS! 🎉
Some time has passed since we wrote about our roadmap to v0.4. In this post, we want to provide some insight into what has happened in the development of OpenMLS generally, but also relative to the goals we included in the roadmap.
Our high-level goal with v0.4 was to reach a state where we have an API stable enough and an implementation robust enough such that people interested in OpenMLS can start exploring it in the context of their own projects. However, this is not v1.0 and we can neither promise that the API won’t change in the future, nor do we advise using OpenMLS in production or indeed in any security-sensitive context. With this disclaimer out of the way, let’s see what has happened in these past months."><meta name=author content="Konrad Kohbrok"><link rel=canonical href=https://blog.openmls.tech/posts/2022-02-28-v0_4-release/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.openmls.tech/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.openmls.tech/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.openmls.tech/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.openmls.tech/apple-touch-icon.png><link rel=mask-icon href=https://blog.openmls.tech/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.openmls.tech/posts/2022-02-28-v0_4-release/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="OpenMLS v0.4 Release"><meta property="og:description" content="Today, we are excited to announce the release of v0.4 of OpenMLS! 🎉
Some time has passed since we wrote about our roadmap to v0.4. In this post, we want to provide some insight into what has happened in the development of OpenMLS generally, but also relative to the goals we included in the roadmap.
Our high-level goal with v0.4 was to reach a state where we have an API stable enough and an implementation robust enough such that people interested in OpenMLS can start exploring it in the context of their own projects. However, this is not v1.0 and we can neither promise that the API won’t change in the future, nor do we advise using OpenMLS in production or indeed in any security-sensitive context. With this disclaimer out of the way, let’s see what has happened in these past months."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.openmls.tech/posts/2022-02-28-v0_4-release/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-28T00:00:00+00:00"><meta property="article:modified_time" content="2022-02-28T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="OpenMLS v0.4 Release"><meta name=twitter:description content="Today, we are excited to announce the release of v0.4 of OpenMLS! 🎉
Some time has passed since we wrote about our roadmap to v0.4. In this post, we want to provide some insight into what has happened in the development of OpenMLS generally, but also relative to the goals we included in the roadmap.
Our high-level goal with v0.4 was to reach a state where we have an API stable enough and an implementation robust enough such that people interested in OpenMLS can start exploring it in the context of their own projects. However, this is not v1.0 and we can neither promise that the API won’t change in the future, nor do we advise using OpenMLS in production or indeed in any security-sensitive context. With this disclaimer out of the way, let’s see what has happened in these past months."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.openmls.tech/posts/"},{"@type":"ListItem","position":2,"name":"OpenMLS v0.4 Release","item":"https://blog.openmls.tech/posts/2022-02-28-v0_4-release/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"OpenMLS v0.4 Release","name":"OpenMLS v0.4 Release","description":"Today, we are excited to announce the release of v0.4 of OpenMLS! 🎉\nSome time has passed since we wrote about our roadmap to v0.4. In this post, we want to provide some insight into what has happened in the development of OpenMLS generally, but also relative to the goals we included in the roadmap.\nOur high-level goal with v0.4 was to reach a state where we have an API stable enough and an implementation robust enough such that people interested in OpenMLS can start exploring it in the context of their own projects. However, this is not v1.0 and we can neither promise that the API won’t change in the future, nor do we advise using OpenMLS in production or indeed in any security-sensitive context. With this disclaimer out of the way, let’s see what has happened in these past months.\n","keywords":["mls","openmls","release"],"articleBody":"Today, we are excited to announce the release of v0.4 of OpenMLS! 🎉\nSome time has passed since we wrote about our roadmap to v0.4. In this post, we want to provide some insight into what has happened in the development of OpenMLS generally, but also relative to the goals we included in the roadmap.\nOur high-level goal with v0.4 was to reach a state where we have an API stable enough and an implementation robust enough such that people interested in OpenMLS can start exploring it in the context of their own projects. However, this is not v1.0 and we can neither promise that the API won’t change in the future, nor do we advise using OpenMLS in production or indeed in any security-sensitive context. With this disclaimer out of the way, let’s see what has happened in these past months.\n🎯 Milestones Reached In our roadmap blog post, we documented a number of milestones that we were aiming for. Here is an overview of the milestones and how we reached them.\n📜 High-Level API and Documentation After a lot of clean-up and re-design, OpenMLS now exposes the MlsGroup API, a high-level API that allows an application to create and manage a group, as well as parse, process, and validate MLS messages. The new API comes with the following changes:\nMajor improvements to the documentation of the structs and functions we expose. The docs can be found here. The way that errors are exposed by OpenMLS was completely refactored, such that callers can now usefully branch on the errors thrown by a function. Members of a group are now addressed using their KeyPackageRef (a hash of the key material representing the member in a given group) rather than their index in the group’s ratchet tree. This change required a major refactoring effort throughout our code-base, mirroring the preceding effort made on the spec-level to better abstract away the tree underlying MLS. 📚 User Manual OpenMLS now has a user manual that contains guidance on how to use the MlsGroup API to perform MLS group operations, along with some explicit examples.\n🔐 Crypto Provider With v0.4 comes the OpenMlsCryptoProvider trait, that in turn wraps three other traits:\nthe OpenMlsCrypto trait, on which OpenMLS relies for crypto implementations the OpenMlsKeyStore trait, which can be used to store and retrieve cryptographic key material the OpenMlsRand trait, which OpenMLS uses to generate randomness OpenMLS provides two implementations of the OpenMlsCryptoProvider trait, one based on the evercrypt crypto provider and one on the Rust Crypto implementations. Both implementations rely on the rand_chacha crate for random number generation and a simple memory-based key store. See here for more information on the traits and their implementations.\nWith the traits in place, anyone can bring their own implementations to use with OpenMLS.\n⚙️ Supported Platforms OpenMLS is now compiled and tested for a number of 32 and 64-bit architectures:\nOS Target Build Tests CI 🐧 x86_64-unknown-linux-gnu ✅ ✅ GitHub 🐧 i686-unknown-linux-gnu ✅ ✅ GitHub 🪟 x86_64-pc-windows-msvc ✅ ✅ GitHub 🪟 i686-pc-windows-msvc ✅ ✅ GitHub 🍎 x86_64-apple-darwin ✅ ✅ GitHub 🐧 aarch64-unknown-linux-gnu ✅ ✅ drone.io 🍎 aarch64-apple-darwin ✅ ❌ GitHub 🐧 aarch64-unknown-linux-gnu ✅ ❌ GitHub 🤖 aarch64-linux-android ✅ ❌ GitHub 🍎 aarch64-apple-ios ✅ ❌ GitHub 🍎 aarch64-apple-ios-sim ✅ ❌ GitHub 🕸️ wasm32-unknown-unknown ✅ ❌ GitHub 💌 Validation \u0026 Authorization Making use of Rust’s strong type system, the CoreGroup layer underneath the MlsGroup API not only ensures that every incoming MLS message is syntactically and semantically validated according to the MLS spec, but also that messages created using the MlsGroup API fulfill these requirements. Before any messages are finally applied to a group, the API exposes the message to the application along with all information required to make its own policy decisions.\nAll validation steps are indexed and documented, as well as thoroughly tested.\n🏗️ Still Not Finished: MLS Keeps Improving For a while now, MLS has been “close to a working group last call”, but as implementations have matured and academic research on the protocol has progressed, issues and improvement proposals have been steadily trickling in. As a result, at the time of release of OpenMLS v0.4, there is still no working group last call and no additional draft of the specification has been released. Consequently, v0.4 is not quite feature-complete, but advances the implementation to draft 12+.\n🧑🏼‍🔧 More Improvements Under the Hood To achieve all of the milestones listed above, OpenMLS has seen many improvements under the hood.\n🌳 TreeSync: The tree implementation supporting OpenMLS has been re-written in a style that allows a diff-merge process and that exposes a clear abstraction boundary between the ratchet tree and the rest of the implementation. ⚠️ Errors: OpenMLS now uses the thiserror crate throughout. Instead of module-wide error types, every function now returns an error enum that contains only the errors that can actually occur during the course of the function. 😱 Almost panic-free: Although not quite there yet, we have made a lot of progress in transitioning to a panic-free implementation, such that even in the event of an implementation bug we can ensure that OpenMLS functions will not panic. ⏱️ Parallelization: The performance-critical functions of OpenMLS around the encryption of key material to other group members is now parallelized using the rayon crate. 💼 Future Work The MLS specification is still in motion and there are many things that need to be improved before we can move towards the next OpenMLS release. If you have a suggestion, please let us know by joining our Zulip instance or by filing an issue in our GitHub repo. Or send us an email at hello@openmls.tech.\n💯 Metrics Here are some data points that give an overview of our activity since the release of the roadmap in October 2021.\nClosed issues since October 2021: 188 Merged PRs since October 2021: 223 327 (update) commits ","wordCount":"974","inLanguage":"en","datePublished":"2022-02-28T00:00:00Z","dateModified":"2022-02-28T00:00:00Z","author":{"@type":"Person","name":"Konrad Kohbrok"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.openmls.tech/posts/2022-02-28-v0_4-release/"},"publisher":{"@type":"Organization","name":"OpenMLS","logo":{"@type":"ImageObject","url":"https://blog.openmls.tech/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.openmls.tech/ accesskey=h title="OpenMLS (Alt + H)">OpenMLS</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.openmls.tech/ title=Home><span>Home</span></a></li><li><a href=https://github.com/openmls/openmls title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">OpenMLS v0.4 Release</h1><div class=post-meta><span title='2022-02-28 00:00:00 +0000 UTC'>February 28, 2022</span>&nbsp;·&nbsp;Konrad Kohbrok</div></header><div class=post-content><p><strong>Today, we are excited to announce the release of <a href=https://github.com/openmls/openmls/releases/tag/v0.4.0>v0.4 of OpenMLS</a>! 🎉</strong></p><p>Some time has passed since we wrote about our <a href=https://openmls.tech/blog/2021-10-19-openmls-04-roadmap/>roadmap to v0.4</a>. In this post, we want to provide some insight into what has happened in the development of OpenMLS generally, but also relative to the goals we included in the roadmap.</p><p>Our high-level goal with v0.4 was to reach a state where we have an API stable enough and an implementation robust enough such that people interested in OpenMLS can start exploring it in the context of their own projects. However, this is not v1.0 and we can neither promise that the API won’t change in the future, nor do we advise using OpenMLS in production or indeed in any security-sensitive context. With this disclaimer out of the way, let’s see what has happened in these past months.</p><h2 id=-milestones-reached>🎯 Milestones Reached<a hidden class=anchor aria-hidden=true href=#-milestones-reached>#</a></h2><p>In our roadmap blog post, we documented a number of milestones that we were aiming for. Here is an overview of the milestones and how we reached them.</p><h3 id=-high-level-api-and-documentation>📜 High-Level API and Documentation<a hidden class=anchor aria-hidden=true href=#-high-level-api-and-documentation>#</a></h3><p>After a lot of clean-up and re-design, OpenMLS now exposes the <code>MlsGroup</code> API, a high-level API that allows an application to create and manage a group, as well as parse, process, and validate MLS messages. The new API comes with the following changes:</p><ul><li>Major improvements to the documentation of the structs and functions we expose. The docs can be found <a href=https://docs.rs/crate/openmls/latest>here</a>.</li><li>The way that errors are exposed by OpenMLS was completely refactored, such that callers can now usefully branch on the errors thrown by a function.</li><li>Members of a group are now addressed using their <code>KeyPackageRef</code> (a hash of the key material representing the member in a given group) rather than their index in the group’s ratchet tree. This change required a major refactoring effort throughout our code-base, mirroring the preceding effort made on the spec-level to better abstract away the tree underlying MLS.</li></ul><h3 id=-user-manual>📚 User Manual<a hidden class=anchor aria-hidden=true href=#-user-manual>#</a></h3><p>OpenMLS now has a <a href=https://openmls.tech/book>user manual</a> that contains guidance on how to use the <code>MlsGroup</code> API to perform MLS group operations, along with some explicit examples.</p><h3 id=-crypto-provider>🔐 Crypto Provider<a hidden class=anchor aria-hidden=true href=#-crypto-provider>#</a></h3><p>With v0.4 comes the <code>OpenMlsCryptoProvider</code> trait, that in turn wraps three other traits:</p><ul><li>the <code>OpenMlsCrypto</code> trait, on which OpenMLS relies for crypto implementations</li><li>the <code>OpenMlsKeyStore</code> trait, which can be used to store and retrieve cryptographic key material</li><li>the <code>OpenMlsRand</code> trait, which OpenMLS uses to generate randomness</li></ul><p>OpenMLS provides two implementations of the <code>OpenMlsCryptoProvider</code> trait, one based on the <a href=https://hacl-star.github.io/HaclValeEverCrypt.html>evercrypt</a> crypto provider and one on the <a href=https://github.com/RustCrypto>Rust Crypto</a> implementations. Both implementations rely on the <code>rand_chacha</code> crate for random number generation and a simple memory-based key store. See <a href=https://github.com/openmls/openmls/tree/main/traits>here</a> for more information on the traits and their implementations.</p><p>With the traits in place, anyone can bring their own implementations to use with OpenMLS.</p><h3 id=-supported-platforms>⚙️ Supported Platforms<a hidden class=anchor aria-hidden=true href=#-supported-platforms>#</a></h3><p>OpenMLS is now compiled and tested for a number of 32 and 64-bit architectures:</p><table><thead><tr><th>OS</th><th>Target</th><th>Build</th><th>Tests</th><th>CI</th></tr></thead><tbody><tr><td>🐧</td><td>x86_64-unknown-linux-gnu</td><td>✅</td><td>✅</td><td>GitHub</td></tr><tr><td>🐧</td><td>i686-unknown-linux-gnu</td><td>✅</td><td>✅</td><td>GitHub</td></tr><tr><td>🪟</td><td>x86_64-pc-windows-msvc</td><td>✅</td><td>✅</td><td>GitHub</td></tr><tr><td>🪟</td><td>i686-pc-windows-msvc</td><td>✅</td><td>✅</td><td>GitHub</td></tr><tr><td>🍎</td><td>x86_64-apple-darwin</td><td>✅</td><td>✅</td><td>GitHub</td></tr><tr><td>🐧</td><td>aarch64-unknown-linux-gnu</td><td>✅</td><td>✅</td><td>drone.io</td></tr><tr><td>🍎</td><td>aarch64-apple-darwin</td><td>✅</td><td>❌</td><td>GitHub</td></tr><tr><td>🐧</td><td>aarch64-unknown-linux-gnu</td><td>✅</td><td>❌</td><td>GitHub</td></tr><tr><td>🤖</td><td>aarch64-linux-android</td><td>✅</td><td>❌</td><td>GitHub</td></tr><tr><td>🍎</td><td>aarch64-apple-ios</td><td>✅</td><td>❌</td><td>GitHub</td></tr><tr><td>🍎</td><td>aarch64-apple-ios-sim</td><td>✅</td><td>❌</td><td>GitHub</td></tr><tr><td>🕸️</td><td>wasm32-unknown-unknown</td><td>✅</td><td>❌</td><td>GitHub</td></tr></tbody></table><h3 id=-validation--authorization>💌 Validation & Authorization<a hidden class=anchor aria-hidden=true href=#-validation--authorization>#</a></h3><p>Making use of Rust’s strong type system, the <code>CoreGroup</code> layer underneath the <code>MlsGroup</code> API not only ensures that every incoming MLS message is syntactically and semantically validated according to the MLS spec, but also that messages created using the <code>MlsGroup</code> API fulfill these requirements. Before any messages are finally applied to a group, the API exposes the message to the application along with all information required to make its own policy decisions.</p><p>All validation steps are <a href=https://openmls.tech/book/message_validation.html>indexed and documented</a>, as well as thoroughly tested.</p><h2 id=-still-not-finished-mls-keeps-improving>🏗️ Still Not Finished: MLS Keeps Improving<a hidden class=anchor aria-hidden=true href=#-still-not-finished-mls-keeps-improving>#</a></h2><p>For a while now, MLS has been “close to a working group last call”, but as implementations have matured and academic research on the protocol has progressed, issues and improvement proposals have been steadily trickling in. As a result, at the time of release of OpenMLS v0.4, there is still no working group last call and no additional draft of the specification has been released. Consequently, v0.4 is <a href="https://github.com/openmls/openmls/issues?q=is%3Aissue+is%3Aopen+label%3A%22mls-spec+change%22">not quite feature-complete</a>, but advances the implementation to draft 12+.</p><h2 id=-more-improvements-under-the-hood>🧑🏼‍🔧 More Improvements Under the Hood<a hidden class=anchor aria-hidden=true href=#-more-improvements-under-the-hood>#</a></h2><p>To achieve all of the milestones listed above, OpenMLS has seen many improvements under the hood.</p><ul><li>🌳 TreeSync: The tree implementation supporting OpenMLS has been re-written in a style that allows a diff-merge process and that exposes a clear abstraction boundary between the ratchet tree and the rest of the implementation.</li><li>⚠️ Errors: OpenMLS now uses the <code>thiserror</code> crate throughout. Instead of module-wide error types, every function now returns an error enum that contains only the errors that can actually occur during the course of the function.</li><li>😱 Almost panic-free: Although not quite there yet, we have made a lot of progress in transitioning to a panic-free implementation, such that even in the event of an implementation bug we can ensure that OpenMLS functions will not panic.</li><li>⏱️ Parallelization: The performance-critical functions of OpenMLS around the encryption of key material to other group members is now parallelized using the <code>rayon</code> crate.</li></ul><h2 id=-future-work>💼 Future Work<a hidden class=anchor aria-hidden=true href=#-future-work>#</a></h2><p>The MLS specification is still in motion and there are many things that need to be improved before we can move towards the next OpenMLS release. If you have a suggestion, please let us know by joining our <a href=https://openmls.zulipchat.com>Zulip instance</a> or by filing an issue in our <a href=https://github.com/openmls/openmls>GitHub repo</a>. Or send us an email at <a href=mailto:hello@openmls.tech>hello@openmls.tech</a>.</p><h2 id=-metrics>💯 Metrics<a hidden class=anchor aria-hidden=true href=#-metrics>#</a></h2><p>Here are some data points that give an overview of our activity since the release of the roadmap in October 2021.</p><ul><li><a href="https://github.com/openmls/openmls/issues?q=is%3Aissue+is%3Aclosed+updated%3A2021-10-01..2022-02-28+">Closed issues since October 2021: 188</a></li><li><a href="https://github.com/openmls/openmls/pulls?q=is%3Apr+is%3Aclosed+updated%3A2021-10-01..2022-02-28+">Merged PRs since October 2021: 223</a></li><li><a href=https://github.com/openmls/openmls/compare/b99b23c8b76c3f1bb74ec7fef931b9b6c119cd85...v0.4.0>327 (update) commits</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.openmls.tech/tags/mls/>Mls</a></li><li><a href=https://blog.openmls.tech/tags/openmls/>Openmls</a></li><li><a href=https://blog.openmls.tech/tags/release/>Release</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://blog.openmls.tech/>OpenMLS</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>